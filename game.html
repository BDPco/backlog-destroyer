<!DOCTYPE html>
<html>
<head>
    <title>BDP: Jamaica Road Rush</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
    <style>
        body { margin: 0; background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
        #instructions { position: absolute; bottom: 20px; color: white; font-family: sans-serif; background: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <div id="instructions">Use ARROW KEYS to drive the Probox!</div>
<script>
    const config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        physics: { default: 'arcade', arcade: { debug: false } },
        scene: { preload: preload, create: create, update: update }
    };

    const game = new Phaser.Game(config);
    let car, cursors, speed = 0;

    function preload() {
        // We use a built-in Phaser shape for the car so it doesn't fail if images are missing
    }

    function create() {
        // 1. Create a huge Green Grass background (The Island)
        const graphics = this.add.graphics();
        graphics.fillStyle(0x009b3a, 1); // Jamaican Green
        graphics.fillRect(0, 0, 2000, 2000);
        
        // Add some "Roads" (Grey rectangles)
        graphics.fillStyle(0x333333, 1);
        graphics.fillRect(0, 900, 2000, 200); // Horizontal Road
        graphics.fillRect(900, 0, 200, 2000); // Vertical Road

        this.physics.world.setBounds(0, 0, 2000, 2000);

        // 2. Create the Car (A simple rectangle for now so it ALWAYS loads)
        // We will replace this with your Probox later
        car = this.add.rectangle(1000, 1000, 50, 30, 0xfed100); // Jamaican Gold Car
        this.physics.add.existing(car);
        car.body.setCollideWorldBounds(true);

        // 3. Camera Follow
        this.cameras.main.startFollow(car, true, 0.1, 0.1);
        this.cameras.main.setBounds(0, 0, 2000, 2000);

        cursors = this.input.keyboard.createCursorKeys();
    }

    function update() {
        if (cursors.up.isDown) speed = Math.min(speed + 5, 400);
        else if (cursors.down.isDown) speed = Math.max(speed - 5, -100);
        else speed *= 0.96;

        if (speed !== 0) {
            const turn = speed > 0 ? 1 : -1;
            if (cursors.left.isDown) car.rotation -= 0.05 * turn;
            if (cursors.right.isDown) car.rotation += 0.05 * turn;
        }

        this.physics.velocityFromRotation(car.rotation, speed, car.body.velocity);
    }
</script>
</body>
</html>
